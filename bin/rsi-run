#!/usr/bin/env bash
# rsi-run â€” run a command inside container as agent
source "$(dirname "$0")/../lib/common.sh"

if [[ $# -lt 2 ]]; then
    echo "Usage: rsi run <name> <command...>"
    exit 1
fi

name="$1"
shift
require_running "$name"

cn="$(container_name "$name")"

sudo "$NIXOS_CONTAINER" run "$cn" -- su -l agent -c "$*"
